<!DOCTYPE html>
<html>
<head>
	<title>F2 - HTML Container Example</title>
	<!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href="./assets/css/smoothness/jquery-ui-1.8.22.custom.css" type="text/css" rel="stylesheet" />
	<link href="./assets/bootstrap/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
	<link href="./assets/bootstrap/css/bootstrap-responsive.min.css" type="text/css" rel="stylesheet" />
	<style type="text/css">
		body {
			padding-top:60px;
		}

		.f2-app header {
			background: #0088cc;
			background: -moz-linear-gradient(top,  #0088cc 0%, #0055cc 100%);
			background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#0088cc), color-stop(100%,#0055cc));
			background: -webkit-linear-gradient(top,  #0088cc 0%,#0055cc 100%);
			background: -o-linear-gradient(top,  #0088cc 0%,#0055cc 100%);
			background: -ms-linear-gradient(top,  #0088cc 0%,#0055cc 100%);
			background: linear-gradient(to bottom,  #0088cc 0%,#0055cc 100%);
			filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#0088cc', endColorstr='#0055cc',GradientType=0 );

			-webkit-border-top-left-radius: 4px;
			-webkit-border-top-right-radius: 4px;
			-moz-border-radius-topleft: 4px;
			-moz-border-radius-topright: 4px;
			border-top-left-radius: 4px;
			border-top-right-radius: 4px;
			
			border-left:1px solid #05C;
			border-right:1px solid #05C;
			border-top:1px solid #05C;
			padding:5px 10px;
		}
		.f2-app header h2 {
			color:#FFFFFF;
			font-size:14px;
			line-height:normal;
			padding:0;
		}
		.f2-app .well {
			-webkit-border-top-left-radius:0;
			-webkit-border-top-right-radius:0;
			-moz-border-radius-topleft:0;
			-moz-border-radius-topright:0;
			border-top-left-radius:0;
			border-top-right-radius:0;
			border-top:0;
		}
	</style>
</head>
<body>
	<div class="navbar navbar-fixed-top">
		<div class="navbar-inner">
			<div class="container">
				<a class="brand">Container Provider</a>
				<div class="nav-collapse">
					<ul class="nav">
						<li class="active"><a>Home</a></li>
						<li><a>Link 1</a></li>
						<li><a>Link 2</a></li>
						<li><a>Link 3</a></li>
						<li><a>Link 4</a></li>
					</ul>
					<form class="navbar-search pull-right">
						<input id="symbolLookup" class="search-query span2 ui-autocomplete-input" type="text" placeholder="Symbol Lookup" autocomplete="off" role="textbox" aria-autocomplete="list" aria-haspopup="true">
					</form>
				</div>
			</div>
		</div>
	</div>

	<div id="mainContent" class="indexPage container">
		<div class="row">
			<div class="column span4"></div>
			<div class="column span4"></div>
			<div class="column span4"></div>
		</div>
	</div>

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js" type="text/javascript"></script>
	<script src="./assets/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="../../../src/f2.debug.js" type="text/javascript"></script>
	<script type="text/javascript">
		$(function() {
			// define all of the apps
			var apps = [
				{
					appId: "1234",
					description: "A simple hello world app.",
					name: "Hello World",
					url: "//wksbbakerw7.wsod.local/Internal/OpenFinancialFramework/AppProvider/App/Factory/jsonp?params=%5B%7B%22Id%22%3A%22HelloWorld%22%7D%5D",
					views: [F2.Constants.Views.HOME]
				},

				{
					appId: "5678",
					description: "A simple app without using the web framework.",
					name: "Non-Framework App",
					url: "../../apps/JScript/HelloWorld/index.asp",
					views: [F2.Constants.Views.HOME]
				},

				{
					appId: "1234",
					description: "A simple hello world app.",
					name: "Hello World",
					url: "//wksbbakerw7.wsod.local/Internal/OpenFinancialFramework/AppProvider/App/Factory/jsonp?params=%5B%7B%22Id%22%3A%22HelloWorld%22%7D%5D",
					views: [F2.Constants.Views.HOME]
				},

				{
					appId: "5678",
					description: "A simple app without using the web framework.",
					isSecure: true,
					name: "Non-Framework App",
					url: "../../apps/JScript/HelloWorld/index.asp",
					views: [F2.Constants.Views.HOME]
				},

				{
					appId: "9101112",
					description: "A simple quote app.",
					name: "Quick Quote",
					url: "//wksbbakerw7.wsod.local/Internal/OpenFinancialFramework/AppProvider/App/Factory/jsonp?params=%5B%7B%22Id%22%3A%22Quote%22%7D%5D",
					views: [F2.Constants.Views.HOME, F2.Constants.Views.SETTINGS]
				},

				{
					appId: "1203981203498123",
					description: "A simple news app.",
					name: "News",
					url: "../../apps/PHP/News/index.php",
					views: [F2.Constants.Views.HOME]
				}
			];

			// init symbol lookup
			$("#symbolLookup").autocomplete({
				source: function (request, response) {

					$.ajax({
						url: "//dev.markitondemand.com/api/Lookup/jsonp",
						dataType: "jsonp",
						data: {
							input: request.term
						},
						success: function (data) {
							response($.map(data, function (item) {
								return {
									label: item.Name + " (" + item.Exchange + ")",
									value: item.Symbol
								}
							}));
						}
					});
				},
				minLength: 0,
				select: function (event, ui) {
					F2.Events.emit(F2.Constants.Events.CONTAINER_SYMBOL_CHANGE, { symbol: ui.item.value, name: ui.item.label });
				}
			});

			// init Container
			F2.init({
				appWrapper: function (app, html) {
					return [
						'<section class="">',
							'<header class="clearfix">',
								'<h2 class="pull-left">', app.name, '</h2>',
								'<div class="btn-group pull-right">',
									'<button class="btn btn-mini btn-primary dropdown-toggle" data-toggle="dropdown">',
										'<i class="icon-white icon-cog"></i> ',
										'<span class="caret"></span>',
									'</button>',
									'<ul class="dropdown-menu">',
										F2.inArray(F2.Constants.Views.SETTINGS, app.views) ? '<li><a href="#" class="' + F2.Constants.Css.APP_VIEW_TRIGGER + '" ' + F2.Constants.Views.DATA_ATTRIBUTE + '="' + F2.Constants.Views.SETTINGS + '">Edit Settings</a></li>' : '',
										'<li><a href="#" class="' + F2.Constants.Css.APP_VIEW_TRIGGER + '" ' + F2.Constants.Views.DATA_ATTRIBUTE + '="' + F2.Constants.Views.REMOVE + '">Remove App</a></li>',
									'</ul>',
								'</div>',
							'</header>',
							html,
						'</section>'
					].join('');
				},

				appWriter: function (app, html) {

					var columns = $("#mainContent div.column");
					var colIndex = 0;
					var colHeight = columns.eq(0).height();

					// find the shortest column
					$(columns).each(function (i, e) {
						if ($(e).height() < colHeight) {
							colIndex = i;
							colHeight = $(e).height();
						}
					});

					$(columns).eq(colIndex).append(html);
				},

				supportedViews: [F2.Constants.Views.HOME, F2.Constants.Views.SETTINGS, F2.Constants.Views.REMOVE],
				secureAppPagePath: "secure.html" // this should go on a separate domain from index.html
			});

			// init apps
			for (var i = 0; i < apps.length; i++) {
				F2.registerApp(apps[i]);
			}
		});
	</script>
</body>
</html>
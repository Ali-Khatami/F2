<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>F2 Documentation - Developing F2 Apps</title>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
  </style>
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="F2, the open financial framework, is a web integration framework designed specifically for the financial markets.">
  <meta name="author" content="Markit">
  
  <!--<link href="//docs.openf2.com/css/bootstrap.min.css" rel="stylesheet">-->
  <link href="./css/F2.css" rel="stylesheet">
  <link href="http://docs.openf2.com/css/prettify.css" rel="stylesheet">
  <link href="./css/F2-docs.css" rel="stylesheet">
  
  <style type="text/css" media="print">
  	#toc {
  		display: none;
  	}
  
  	.row .span9 {
  		margin-left: 0;
  	}
  </style>
</head>
<body>
<div class="navbar navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container">
      <a class="brand" href="index.html">F2: Financial Framework</a>
      <div class="tagline-divider"></div>
      <div class="tagline">Helping you build smarter financial apps</div>
      <ul class="nav pull-right">
        <li><a href="http://www.openF2.com">OpenF2.com</a></li>
        <li class="divider-vertical"></li>
        <li class="active"><a href="index.html">Docs</a></li>
        <li class="divider-vertical"></li>
        <li><a href="../sdk/docs/">SDK</a></li>
        <li class="divider-vertical"></li>
        <li><a href="https://github.com/OpenF2/F2/">Fork F2 on GitHub</a></li>
        <li class="divider-vertical"></li>
        <li><a class="download" href="https://github.com/OpenF2/F2/zipball/master">Download <i class="icon-download"></i></a></li>
        <li class="divider-vertical"></li>
        <li><a href="https://github.com/OpenF2/F2/commits/master" class="version">v 0.10.2</a></li>
      </ul>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">

    <div class="span3" id="toc">
        <ul class="nav nav-list nav-pills nav-stacked">
          <li><a href="index.html">Overview</a></li>
          <li><a href="components-of-the-framework.html">Components of F2</a></li>
          <li><a href="creating-F2.html">Creating F2</a></li>
		      <li><a href="f2-requirements.html">Requirements</a></li>
          <li class="divider"></li>
          <li><a href="developing-f2-apps.html">Developing F2 Apps</a></li>
		      <!--<li><a href="single-sign-on.html">Single Sign On (SSO)</a></li>-->
		      <li><a href="developing-the-container.html">Developing F2 Containers</a></li>
          <li><a href="extending-f2.html">Extending F2</a></li>
          <li class="divider"></li>
          <li><a href="../sdk/docs/">F2.js SDK Reference</a></li>
          <li class="divider"></li>
        </ul>
    </div><!--/span3-->

	<div class="span9">
		<div id="docs">
<header>
<h1 class="title">Developing F2 Apps</h1>
</header>
<p class="lead">
To understand how F2 apps work or to get started building apps, read through the documentation below. If you have not yet cloned the F2 repo on GitHub or downloaded the latest build, you should do that now by reading the <a href="https://github.com/OpenF2/F2#quick-start">quick start guide</a>.
</p>

<section class="level2" id="overview">
<h2>Overview</h2>
<p>Defined very simply, a F2 app is a <code>javascript</code> file which defines your <a href="../../sdk/docs/classes/F2.AppManifest.html">app manifest</a>. Technically speaking, a F2 app is one of two things:</p>
<dl class="dl-horizontal">
    <dt>
Display App
</dt>
    <dd>
A display app presents information to users in the form of a visible widget (using HTML, CSS, and JavaScript).
</dd>
    <dt>
Data App
</dt>
    <dd>
A data app is a content feed available in industry-standard formats including JSON, JSONP, RSS or app developer-designed XML.
</dd>
</dl>

<p>For the purposes of this documentation and to get started, we'll focus on developing <strong>display apps</strong>.</p>
<div class="well well-small">
<h4>
About Apps
</h4>
<p>
The term &quot;app&quot;, in popular web parlance, is a program that runs on your smartphone or tablet. In the Open Financial Framework, apps are small web pages and consist of HTML, CSS, JavaScript and, of course, data. They are <em>not</em> smartphone apps built for the Apple, Android or BlackBerry app stores. You could think of a F2 app as a module or widget or component.
</p>
</div>

<section class="level3" id="understanding-f2-apps">
<h3>Understanding F2 Apps</h3>
<p>To develop an app for F2, there are a few things you need to first understand about apps themselves. Apps are useless without a container to run in and likewise containers aren't much to look at without apps. There are many <a href="components-of-the-framework.html">components of F2</a>, and apps and containers are only scratching the surface in terms of what is available to app developers within F2. Including concepts like <a href="components-of-the-framework.html#app-context">app context</a> and standardizing the <a href="components-of-the-framework.html#creating-a-common-look-and-feel">creation of a common look and feel</a> across apps, apps form the cornerstone of F2-enabled multi-party web applications.</p>
<section class="level4" id="get-started">
<h4>Get Started</h4>
<p>To help you get started, you will find a basic container in the <a href="https://github.com/OpenF2/F2/tree/master/sdk/examples/containers/HTML">project repo on GitHub</a> along with a number of sample apps. Once you open the project repository, point your browser at:</p>
<p><code>http://localhost/&lt;your_extract_location&gt;/F2/sdk/examples/containers/HTML/</code></p>
<p><span class="label">Note</span> The examples provided as part of the project repo demonstrate apps written in different languages (PHP, JavaScript, Ruby, ASP). While it is not a requirement you have a web server configured on your computer, it will certainly allow you to more deeply explore the sample apps.</p>
<hr>
</section>
</section>
</section>
<section class="level2" id="apps-and-containers">
<h2>Apps and Containers</h2>
<p>To understand F2 and the role of apps, you need to understand the role of the <strong>container</strong>.</p>
<figure>
<img src="./img/wwp_devices.png" title="Containers and Apps on desktop and mobile"><figcaption></figcaption>
</figure>
<p>The F2 container is most simply described as the user interface and the location where all apps reside. More specifically, the container is a web page which is &quot;aware&quot; of its contents (the apps) and plays the role of a traffic cop managing context passing between F2 apps (if there are more than one). Further, the container can have any variation of intelligence on a wide spectrum which means it can provide data via web services to apps or simply host the F2 JavaScript SDK.</p>
<p>Each container provider, or individual person or company hosting a container, shall be responsible for including the <a href="https://github.com/OpenF2/F2/blob/master/sdk/f2.min.js">F2 JavaScript SDK</a>. Through the SDK, F2.js provides a consistent means for all app developers to load their apps on any container regardless of where it is hosted, who developed it, or what back-end stack it uses.</p>
<p>To get started working with or developing containers, browse to the <a href="developing-the-container.html">documentation for developing the container</a>.</p>
<hr>
</section>
<section class="level2" id="f2-apps">
<h2>F2 Apps</h2>
<p>For an app to work with F2, it must have this basic structure—called the <strong>App Manifest</strong>—represented in <a href="http://json.org">JSON</a>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="st">&quot;inlineScripts&quot;</span>:[],  
    <span class="st">&quot;scripts&quot;</span>:[],    
    <span class="st">&quot;styles&quot;</span>:[],     
    <span class="st">&quot;apps&quot;</span>:[{
            <span class="st">&quot;data&quot;</span>:{},
            <span class="st">&quot;html&quot;</span>:<span class="st">&quot;&quot;</span>,
            <span class="st">&quot;status&quot;</span>:<span class="st">&quot;&quot;</span>
    }]
}</code></pre>
<p>The App Manifest can be generated by the server-side code of your choice or be written-by-hand in your favorite text editor. In the <a href="http://www.github.com/OpenF2/F2">GitHub repository</a>, there are examples in JavaScript, PHP, Python and Classic ASP (JScript) to get you started.</p>
<p>When it's complete (using our examples below), the App Manifest looks like this:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="st">&quot;inlineScripts&quot;</span>:[<span class="st">&quot;var foo = bar; doSomething();&quot;</span>], <span class="co">//discouraged, we&#39;ll explain later.</span>
    <span class="st">&quot;scripts&quot;</span>:[
        <span class="st">&quot;http://www.domain.com/js/app-logic.js&quot;</span>,
        <span class="st">&quot;http://www.domain.com/js/app-helper.js&quot;</span>
    ],   
    <span class="st">&quot;styles&quot;</span>:[
        <span class="st">&quot;http://www.domain.com/css/base.css&quot;</span>,
        <span class="st">&quot;http://www.domain.com/css/ie7.css&quot;</span>
    ],   
    <span class="st">&quot;apps&quot;</span>:[{
            <span class="st">&quot;data&quot;</span>:{ 
                <span class="dt">foo</span>: <span class="st">&quot;bar&quot;</span>,
                <span class="dt">value</span>: <span class="dv">12345</span>
            },
            <span class="st">&quot;html&quot;</span>:<span class="st">&quot;%3Cdiv%20class%3D%22sunrise%22%3EHello%20world.%3C%2Fdiv%3E&quot;</span>
            <span class="st">&quot;status&quot;</span>:<span class="st">&quot;good&quot;</span>
    }]
}</code></pre>
<p>Let's break the App Manifest object down and look at each property (in reverse order to keep it fun).</p>
<section class="level3" id="apps">
<h3>Apps</h3>
<p>The <code>apps</code> property is an array of <code>AppContent</code> objects. Each <code>AppContent</code> object contains three properties:</p>
<ol type="1">
<li><code>html</code></li>
<li><code>data</code></li>
<li><code>status</code></li>
</ol>
<section class="level4" id="html">
<h4>html</h4>
<p>The <code>html</code> property contains the view of your app represented in <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/encodeURIComponent">encoded</a> HTML. While you can modify the way your app appears or functions within the container, the <code>html</code> property is what the container will show when it <a href="../../sdk/docs/classes/F2.html#method_registerApps">registers your app</a> and displays its contents for the first time.</p>
<p>Example:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="st">&quot;html&quot;</span>: <span class="st">&quot;%3Cdiv%20class%3D%22sunrise%22%3EHello%20world.%3C%2Fdiv%3E&quot;</span></code></pre>
<p>The <em>decoded</em> version of the <code>html</code> example above is:</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;sunrise&quot;</span><span class="kw">&gt;</span>Hello world.<span class="kw">&lt;/div&gt;</span></code></pre>
</section>
<section class="level4" id="data">
<h4>data</h4>
<p>The <code>data</code> property is there to support the placement of arbitrary data needing to be passed along with the app. <em>This field is optional.</em></p>
</section>
<section class="level4" id="status">
<h4>status</h4>
<p>The <code>status</code> property allows app developers to communicate a server-side arbitrary status code to itself or to the container. <em>This field is optional.</em></p>
</section>
</section>
<section class="level3" id="styles">
<h3>Styles</h3>
<p>The <code>styles</code> property is an array of URLs represented as strings. The <code>styles</code> array refers to any CSS files needed by the app so it be displayed correctly on the container. The externally-referenced CSS files should be fully-qualified. <a href="#">Read more about CSS and namespacing</a>.</p>
<p>Example:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="st">&quot;styles&quot;</span>: [
    <span class="st">&quot;http://www.domain.com/css/base.css&quot;</span>,
    <span class="st">&quot;http://www.domain.com/css/ie7.css&quot;</span>
]</code></pre>
</section>
<section class="level3" id="scripts">
<h3>Scripts</h3>
<p>The <code>scripts</code> property is an array of URLs represented as strings. The <code>scripts</code> array refers to any JavaScript files needed by the app so it be function correctly on the container. The externally-referenced JS files should be fully-qualified. <a href="#">Read more about JavaScript and namespacing</a>.</p>
<p>Example:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="st">&quot;scripts&quot;</span>: [
    <span class="st">&quot;http://www.domain.com/js/app-logic.js&quot;</span>,
    <span class="st">&quot;http://www.domain.com/js/app-helper.js&quot;</span>
]</code></pre>
</section>
<section class="level3" id="inline-scripts">
<h3>Inline Scripts</h3>
<p>The <code>inlineScripts</code> property is an array of strings. The <code>inlineScripts</code> array includes any JavaScript code needed by the app so it be function correctly on the container. The contents of the <code>inlineScripts</code> array will be evaluated as JavaScript when all <code>scripts</code> have finished loading. <a href="#">Read more about JavaScript and namespacing</a>.</p>
<p>Example:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="st">&quot;inlineScripts&quot;</span>: [
    <span class="st">&quot;var foo = bar; doSomething();&quot;</span>
]</code></pre>
</section>
<section class="level3" id="sample-app-manifest">
<h3>Sample App Manifest</h3>
<p>If we use the examples above, our app would look like this:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="st">&quot;inlineScripts&quot;</span>:[<span class="st">&quot;var foo = bar; doSomething();&quot;</span>], <span class="co">//discouraged, we&#39;ll explain later.</span>
    <span class="st">&quot;scripts&quot;</span>:[
        <span class="st">&quot;http://www.domain.com/js/app-logic.js&quot;</span>,
        <span class="st">&quot;http://www.domain.com/js/app-helper.js&quot;</span>
    ],   
    <span class="st">&quot;styles&quot;</span>:[
        <span class="st">&quot;http://www.domain.com/css/base.css&quot;</span>,
        <span class="st">&quot;http://www.domain.com/css/ie7.css&quot;</span>
    ],   
    <span class="st">&quot;apps&quot;</span>:[{
            <span class="st">&quot;data&quot;</span>:{ 
                <span class="dt">foo</span>: <span class="st">&quot;bar&quot;</span>,
                <span class="dt">value</span>: <span class="dv">12345</span>
            },
            <span class="st">&quot;html&quot;</span>:<span class="st">&quot;%3Cdiv%20class%3D%22sunrise%22%3EHello%20world.%3C%2Fdiv%3E&quot;</span>,
            <span class="st">&quot;status&quot;</span>:<span class="st">&quot;good&quot;</span>
    }]
}</code></pre>
<hr>
</section>
</section>
<section class="level2" id="developing-your-f2-app">
<h2>Developing Your F2 App</h2>
<p>Now that we've detailed the <a href="#f2-apps">F2 app</a> and defined the <a href="#sample-app-manifest">App Manifest</a>, let's take a closer look at how to build <em>your</em> app. We'll explain how to get a F2 AppId, what output format your app needs to support, how the contents of <code>AppContent.html</code> work, and the two hooks for adding form and function to your app: <code>scripts</code> and <code>styles</code>.</p>
<section class="level3" id="f2-appid">
<h3>F2 AppId</h3>
<p>To develop a F2 app, you need a unique identifier called an <strong>AppId</strong>. This AppId will be unique to <em>your app</em> in the entire open financial framework ecosystem. While you don't need a unique app during the app development process, it is recommended you get one. The format of the AppId looks like this: <code>com_&lt;companyName&gt;_&lt;appName&gt;</code>, where the <code>&lt;companyName&gt;</code> &quot;namespace&quot; is your company name and <code>&lt;appName&gt;</code> is the name of your app.</p>
<p>As an example, your AppId could look like this:</p>
<p><code>com_acmecorp_watchlist</code></p>
<p>If you built more than one app while working at Acme Corporation, you could create more AppIds. All of these are valid:</p>
<ul>
<li><code>com_acmecorp_watchlist2</code></li>
<li><code>com_acmecorp_watchlist_big_and_tall</code></li>
<li><code>com_acmecorp_static_charts</code></li>
<li><code>com_acmecorp_interactive_charts</code></li>
</ul>
<p>To guarantee uniqueness, we have provided an AppId generation service that allows you to customize your AppId.</p>
<p><a href="#" class="btn btn-large btn-primary">Get Your F2 AppId Now »</a></p>
</section>
<section class="level3" id="app-html">
<h3>App HTML</h3>
<p>Every F2 app has HTML. The only catch is that the HTML isn't provided by the app itself but rather <em>passed to the container</em> via the App's AppManifest. But that's not a problem because we've <a href="https://github.com/OpenF2/F2/tree/master/sdk/examples/apps">provided examples</a> to show you the way. Here are the steps for getting your app HTML into your <code>AppContent.html</code> property:</p>
<ol type="1">
<li>Develop the web page or module or widget or component or portlet that will be your app.</li>
<li>Take all the contents of it—that is, the HTML—and encode it.</li>
<li>Put the encoded result in the <code>html</code> property of your <code>AppContent</code> object within your App Manifest file's <code>App</code> object.</li>
</ol>
<p><strong>Huh?</strong> Check out this example:</p>
<p>Step 1.</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;sunrise&quot;</span><span class="kw">&gt;</span>Hello world.<span class="kw">&lt;/div&gt;</span></code></pre>
<p>Step 2. Encoded HTML.</p>
<pre class="sourceCode html"><code class="sourceCode html">%3Cdiv%20class%3D%22sunrise%22%3EHello%20world.%3C%2Fdiv%3E</code></pre>
<p>Step 3. App Manifest file.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    ...
    <span class="st">&quot;apps&quot;</span>:[{
        <span class="st">&quot;html&quot;</span>: <span class="st">&quot;%3Cdiv%20class%3D%22sunrise%22%3EHello%20world.%3C%2Fdiv%3E&quot;</span>
        ...
    }]
}</code></pre>
<p><span class="label label-info">Note</span> You are not required to encode the App HTML, so follow steps 2 and 3 above omitting the encoding part.</p>
</section>
<section class="level3" id="scripts-styles">
<h3>Scripts &amp; Styles</h3>
<p>Once your app is on the container, chances are you'll want it to actually do something. As an app developer, it is entirely up to you to write your own stylesheets and javascript code to add form and function to your app. F2's standardized App Manifest provides hooks for your CSS and scripts to get onto the container—just use the <code>scripts</code> and <code>styles</code> arrays detailed above in the <a href="#sample-app-manifest">App Manifest</a>.</p>
<div class="alert alert-info">
<i class="icon-warning-sign"></i> For details about CSS conflicts or javascript collisions once your app is on a container, read all about properly <a href="#namespacing">namespacing your code in F2</a>.
</div>

</section>
<section class="level3" id="app-manifest-response">
<h3>App Manifest Response</h3>
<p>OK, so you know about F2 apps and you've got your own App Manifest file written. There's one final piece—the App Manifest response format. As part of F2, containers register apps—typically hosted on different domains—using JSONP. <strong>This means F2 App Manifest files must provide a JSONP callback function.</strong> (If you don't know what JSONP is or how it works, we recommend <a href="http://remysharp.com/2007/10/08/what-is-jsonp/">reading what Remy Sharp has to say</a> about it.)</p>
<p>For security reasons, the App Manifest JSONP callback function must be a specific format. We have defined that using a combination of a stirng and your unique F2 AppId. The JSONP callback function name looks like this:</p>
<p><code>F2_jsonpCallback_&lt;AppID&gt;</code></p>
<p>When applied, the final App Manifest file looks like this example (where <code>123456789</code> is your AppId):</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">F2_jsonpCallback_123456789({
    <span class="st">&quot;inlineScripts&quot;</span>:[<span class="st">&quot;var foo = bar; doSomething();&quot;</span>], <span class="co">//discouraged, we&#39;ll explain later.</span>
    <span class="st">&quot;scripts&quot;</span>:[
        <span class="st">&quot;http://www.domain.com/js/app-logic.js&quot;</span>,
        <span class="st">&quot;http://www.domain.com/js/app-helper.js&quot;</span>
    ],   
    <span class="st">&quot;styles&quot;</span>:[
        <span class="st">&quot;http://www.domain.com/css/base.css&quot;</span>,
        <span class="st">&quot;http://www.domain.com/css/ie7.css&quot;</span>
    ],   
    <span class="st">&quot;apps&quot;</span>:[{
            <span class="st">&quot;data&quot;</span>:{ 
                <span class="dt">foo</span>: <span class="st">&quot;bar&quot;</span>,
                <span class="dt">value</span>: <span class="dv">12345</span>
            },
            <span class="st">&quot;html&quot;</span>:<span class="st">&quot;%3Cdiv%20class%3D%22sunrise%22%3EHello%20world.%3C%2Fdiv%3E&quot;</span>,
            <span class="st">&quot;status&quot;</span>:<span class="st">&quot;good&quot;</span>
    }]
})</code></pre>
<div class="alert">
<strong>Note:</strong> the JSONP callback function name will <em>not</em> be passed from the container using a traditional querystring parameter (HTTP GET), so you must configure this correctly for your app to appear on a container.
</div>

<p><span class="label label-important">Required</span> Don't forget you need an AppId before you can run your app on a container. <a href="#">Get your AppId now »</a></p>
</section>
<section class="level3" id="supported-app-views">
<h3>Supported App Views</h3>
<p><span class="label label-warning">EDITOR'S NOTE</span> This section needs some TLC.</p>
<p>F2 apps can have one or more views. Every app will have at least one &quot;home&quot; view, while others will include views for settings, help or about. Inside the F2.js SDK, we've <a href="../sdk/docs/classes/F2.App.html#property_views">included support for views</a> and the list can be extended by the container provider.</p>
<p><span class="label">Note</span> If the container doesn't support all the views you need inside your app, you will need to coordinate those additions with the container provider.</p>
<section class="level4" id="setting-up-views">
<h4>Setting Up Views</h4>
<p>Once you've determined the views you'd like to include in your app, the view should be specified by applying the <code>F2.Constants.Css.APPVIEW</code> classname to the containing DOM Element. A <code>data-</code> attribute should be added to the element as well which defines what view type is represented. Twitter Bootstrap's <code>hide</code> class can be applied to views that should be hidden by default.</p>
<p>To setup a single view in your app, use this HTML on your app's outermost element noting the use of the <code>f2-app-view</code> classname and the <code>data-f2-view</code> attribute.</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&#39;f2-app-view&#39;</span><span class="ot"> data-f2-view=</span><span class="st">&#39;home&#39;</span><span class="kw">&gt;</span>
    ...
<span class="kw">&lt;/div&gt;</span></code></pre>
<p>To setup multiple views in your app, write HTML like this noting the use the <code>f2-app-view</code> and <code>hide</code> classnames as well as the <code>data-f2-view</code> attributes.</p>
<pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&#39;f2-app-view&#39;</span><span class="ot"> data-f2-view=</span><span class="st">&#39;home&#39;</span><span class="kw">&gt;</span>
    ...
<span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&#39;f2-app-view hide&#39;</span><span class="ot"> data-f2-view=</span><span class="st">&#39;about&#39;</span><span class="kw">&gt;</span>
    ...
<span class="kw">&lt;/div&gt;</span></code></pre>
<p>For details on <code>F2.Constants.Css.APPVIEW</code>, <a href="../sdk/docs/classes/F2.Constants.Css.html">browse to the SDK docs</a>.</p>
</section>
<section class="level4" id="listening-to-app-view-changes">
<h4>Listening to App View Changes</h4>
<p>You shouldn't be surprised to know F2.js contains event triggers for handling app view changes. Specifically, the <code>APP_VIEW_CHANGE</code> event will be fired by the container when a user clicks to switch the view for an app.</p>
<p>To listen for the <code>APP_VIEW_CHANGE</code> event inside your app code:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">APP</span>_<span class="fu">VIEW</span>_<span class="fu">CHANGE</span>,
    <span class="kw">function</span>(viewName){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;App view changed to &quot;</span> + viewName);
    }
);</code></pre>
<p>For details on <code>F2.Events.on()</code>, <a href="../sdk/docs/classes/F2.Events.html#method_on">browse to the SDK docs</a> and for details on <code>F2.Constants.Events</code>, <a href="../sdk/docs/classes/F2.Constants.Events.html">head over to the F2.Constants docs</a>.</p>
<hr>
</section>
</section>
</section>
<section class="level2" id="namespacing">
<h2>Namespacing</h2>
<p>F2 is a <em>web</em> integration framework which means are apps are inherently insecure—at least the non-secure apps. Following these guidelines, app developers must avoid CSS collisions and JavaScript namespace issues to provide users with the best possible experience.</p>
<p><span class="label label-warning">EDITOR'S NOTE</span> This section needs some TLC.</p>
<section class="level3" id="namespacing-your-css">
<h3>Namespacing Your CSS</h3>
<p>AppId...</p>
<p><code>div.&lt;AppId&gt;</code></p>
</section>
<section class="level3" id="protecting-your-javascript">
<h3>Protecting Your JavaScript</h3>
<p>Closures and the global namespace...</p>
<hr>
</section>
</section>
<section class="level2" id="context">
<h2>Context</h2>
<section class="level3" id="what-is-context">
<h3>What is Context?</h3>
<p>Regardless of type of app, a display or data app has &quot;context&quot;—that is to say an app &quot;knows&quot; about where it is, what is happening around it, and possibly who is viewing it. At the discretion of the app itself, an app can be aware of a specific user's data entitlements as well as information about the user (name, email, company, etc). Additionally, an app is capable of sharing context with the container and nearby apps. This means if Susan wants to create a ticker-focused workspace so she can watch her shares of Apple stock increase in value, the container can send &quot;symbol context&quot; to any listening apps which can be smart enough to refresh themselves focusing on <a href="http://www.google.com/finance?q=NASDAQ%3AAAPL">AAPL</a>.</p>
</section>
<section class="level3" id="how-to-use-context">
<h3>How to use Context</h3>
<p>Each Container will be responsible for hosting the F2 JavaScript SDK. The F2 SDK not only provides the consistent mechanism app developers have come to expect for loading their apps on the container, but also contains an <a href="../sdk/docs/classes/F2.Events.html">event API</a> for handling context.</p>
<p><span class="label label-important">Important</span> It is important to note that while apps can have context themselves, the responsibility for managing context switching or context passing falls on the container. The container assumes the role of a traffic cop—managing which data goes where. By using JavaScript events, the container can listen for events sent by apps and likewise apps can listen for events sent by the container. This means <strong>apps cannot communicate directly with other apps on their own</strong>; apps communicate via the container to other apps since the container controls the <code>F2.Events</code> API.</p>
<p>Let's look at some code.</p>
<section class="level4" id="container-to-app-context">
<h4>Container-to-App Context</h4>
<p>In this example, the container broadcasts, or emits, a javascript event defined in <code>F2.Events.Constants</code>. The <code>F2.Events.emit()</code> method accepts two arguments: the event name and an optional data object.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">CONTAINER</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;AAPL&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Apple, Inc.&quot;</span> 
    }
);</code></pre>
<p>To listen to the <code>F2.Constants.Events.CONTAINER_SYMBOL_CHANGE</code> event inside your F2 app, you can use this code to trigger an alert dialog with the symbol:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">CONTAINER</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;The symbol was changed to &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span>);
    }
);</code></pre>
<p>The <code>F2.Events.on()</code> method accepts the event name and listener function as arguments. <a href="../sdk/docs/classes/F2.Events.html">Read the SDK</a> for more information.</p>
<p><span class="label">Note</span> For a full list of support event types, browse to the SDK for <a href="../sdk/docs/classes/F2.Constants.Events.html">F2.Constants.Events</a>.</p>
</section>
<section class="level4" id="app-to-container-context">
<h4>App-to-Container Context</h4>
<p>In this example, your app emits an event indicating a user is looking at a different stock ticker <em>within your app</em>. Using <code>F2.Events.emit()</code> in your code, your app broadcasts the new symbol. As with container-to-app context passing, the <code>F2.Events.emit()</code> method accepts two arguments: the event name and an optional data object.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">APP</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;MSFT&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Microsoft, Inc.&quot;</span> 
    }
);</code></pre>
<p>The container would need to listen to your apps' broadcasted <code>F2.Constants.Events.APP_SYMBOL_CHANGE</code> event using code like this:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="kw">F2.Constants.Events</span>.<span class="fu">APP</span>_<span class="fu">SYMBOL</span>_<span class="fu">CHANGE</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;The symbol was changed to &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span>);
    }
);</code></pre>
<p><span class="label">Note</span> For a full list of support event types, browse to the SDK for <a href="../sdk/docs/classes/F2.Constants.Events.html">F2.Constants.Events</a>.</p>
</section>
<section class="level4" id="app-to-app-context">
<h4>App-to-App Context</h4>
<p>Apps can also pass context between apps. If there are two or more apps on a container with similar context and the ability to receive messages (yes, through event listeners, context receiving is opt-in), apps can communicate with each other. To communicate with another app, each app will have to know the event name along with the type of data being passed. Let's take a look.</p>
<p>Within &quot;App 1&quot;, context is passed using <code>F2.Events.emit()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">emit</span>(
    <span class="st">&quot;buy_stock&quot;</span>, <span class="co">//custom event name</span>
    { 
        <span class="dt">symbol</span>: <span class="st">&quot;GOOG&quot;</span>, 
        <span class="dt">name</span>: <span class="st">&quot;Google Inc&quot;</span>,
        <span class="dt">price</span>: <span class="fl">682.68</span>,
        <span class="dt">isAvailableToPurchase</span>: <span class="kw">true</span>,
        <span class="dt">orderType</span>: <span class="st">&quot;Market Order&quot;</span>
    }
);</code></pre>
<p>Within &quot;App 2&quot;, context is received using <code>F2.Events.on()</code>:</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.Events</span>.<span class="fu">on</span>(
    <span class="st">&quot;buy_stock&quot;</span>, 
    <span class="kw">function</span>(data){
        <span class="kw">if</span> (<span class="kw">data</span>.<span class="fu">isAvailableToPurchase</span>){
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;Trade ticket order for &quot;</span> + <span class="kw">data</span>.<span class="fu">symbol</span> + <span class="st">&quot; at $&quot;</span> + <span class="kw">data</span>.<span class="fu">price</span>);
        } <span class="kw">else</span> {
            <span class="kw">F2</span>.<span class="fu">log</span>(<span class="st">&quot;This stock is not available for purchase.&quot;</span>)
        }
    }
);</code></pre>
</section>
<section class="level4" id="using-appids-to-secure-context-passing">
<h4>Using AppIds to Secure Context Passing</h4>
<p>What if you want your app to only receive context emitted from apps you trust?</p>
<p>Every F2 app will have a <a href="#developing-your-f2-app">unique AppId</a> and—using the AppId—apps can listen for events emitted from trusted sources.</p>
<p><span class="label label-warning">EDITOR'S NOTE</span> Finish this when code is completed...</p>
<hr>
</section>
</section>
</section>
<section class="level2" id="f2-ui">
<h2>F2 UI</h2>
<p><span class="label label-warning">EDITOR'S NOTE</span> This section needs some TLC. Version 0.10.3 contains correct UI code.</p>
<p>How to use <code>F2.UI.setMaskConfiguration()</code></p>
<pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="kw">F2.UI</span>.<span class="fu">showMask</span>(<span class="kw">this</span>._<span class="fu">app</span>.<span class="fu">instanceId</span>, <span class="kw">this</span>._<span class="fu">container</span>, <span class="kw">true</span>);

<span class="kw">F2.UI</span>.<span class="fu">hideMask</span>(<span class="kw">this</span>._<span class="fu">app</span>.<span class="fu">instanceId</span>, <span class="kw">this</span>._<span class="fu">container</span>);</code></pre>
<hr>
</section>
<section class="level2" id="your-app-on-a-container">
<h2>Your App on a Container</h2>
<p>Good news! The container is responsible for loading its apps, and as long as you've followed F2's standard for <a href="#f2-apps">App Manifests</a> and have a working app, you're pretty much done.</p>
<p>If you're curious about <em>how</em> containers load apps, browse over to the <a href="../sdk/docs/classes/F2.html#method_registerApps">F2.js SDK <code>registerApps()</code> method</a> or <a href="developing-the-container.html">read the container documentation</a>.</p>
<p><span class="label label-warning">EDITOR'S NOTE</span> We should probably say something about <em>how to contact a container provider</em> here.</p>
<section class="level3" id="testing-your-app">
<h3>Testing Your App</h3>
<p>When you <a href="https://github.com/OpenF2/F2/#quick-start">cloned the F2 GitHub repo</a> you also got some example F2 containers for your app development and testing. Open the project repository and navigate to <code>~/F2/sdk/examples/containers</code> to find them or to jump-start your testing, point your browser at:</p>
<p><code>http://localhost/&lt;your_extract_location&gt;/F2/sdk/examples/containers/HTML/</code></p>
<p>If you open <code>~/F2/sdk/examples/containers/apps.json</code> in your text editor, you'll find a list of sample F2 apps. Simply modify this file to your liking and add your app anywhere in the array. The configuration is comprised of <code>F2.App</code> properties, the following are <strong>required</strong>.</p>
<pre class="sourceCode javascript"><code class="sourceCode javascript">{
    <span class="dt">appId</span>: <span class="st">&quot;com_your_appid&quot;</span>,
    <span class="dt">description</span>: <span class="st">&quot;Your app description&quot;</span>,
    <span class="dt">height</span>:<span class="dv">500</span>,
    <span class="dt">isSecure</span>: <span class="kw">false</span>,
    <span class="dt">manifestUrl</span>: <span class="st">&quot;http://www.domain.com/app.json&quot;</span>,
    <span class="dt">name</span>: <span class="st">&quot;Your app name&quot;</span>,
    <span class="dt">views</span>: [<span class="kw">F2.Constants.Views</span>.<span class="fu">HOME</span>]
}</code></pre>
<p>For full details on each of these <code>F2.App</code> properties, <a href="../sdk/docs/classes/F2.App.html">browse the F2.js SDK documentation</a>.</p>
<hr>
<hr>
<hr>
</section>
</section>
<section class="level2" id="hold-the-phone...">
<h2>Hold the phone...</h2>
<p>Everything above is good. Everything below is not good...yet.</p>
<hr>
<hr>
<hr>
<hr>
<p>Since Apps are comprised of mainly HTML, JavaScript and CSS, App development can be as complex as the App developer wishes with one significant limitation: an App cannot be allowed to negatively impact other Apps on the desktop. To prevent accidental impact, Apps are developed inside of JavaScript closure which means an App will not have any public methods and therefore is a closed cell.</p>
<section class="level3" id="designing-your-app">
<h3>Designing Your App</h3>
<p>Design is an important first step in creating a new App. Using the Open Financial Framework’s upcoming design guidelines and App API, App Designers and Developers can take advantage of these available resources to develop Apps on their own schedules. The design guidelines will provide a common theme and offer a baseline for consistency between all Apps on the Container.</p>
<p>There is customization available and it will be imperative for App developers to follow Container-provided guidelines for consistency on a case-by-case basis. The ‘common theme’ provided by this Framework is not a template per se but rather a mechanism to facilitate faster development between numerous App developers.</p>
<hr>
</section>
<section class="level3" id="hosting-an-app">
<h3>Hosting an App</h3>
<p>Since the Framework is web-based and it is a primary requirement of this Framework to simultaneously support multiple Apps from different providers, the following are truths:</p>
<ul>
<li>Anyone can technically host a Container provided they are willing to develop the infrastructure capable of supporting an app ecosystem which includes authentication, entitlements, the app store, cross-container communication (targeting version 1.3 spec), etc. See How to Develop a Container for details.</li>
<li>Similarly, anyone can host an App. By definition, an App is simply a web page or web site which has a Container-accessible domain name.</li>
</ul>
<p>The App Developer or App Provider needs to host their App on a publicly accessible Internet domain. The App should follow the &quot;REST&quot; model for web services. In simple terms, REST is a formal description of the HTTP protocol. Accessing a &quot;REST&quot; App is merely a matter of making a standard HTTP request to a defined resource.</p>
<p>An App can be accessed by an HTTP GET or HTTP POST request. Each request consists of a URI, and a URL encoded list of parameters in JSON. The URI consists of a hostname and base path, a method name, and an optional format specifier. The parameters are appended to the URI on the querystring.</p>
<hr>
</section>
<section class="level3" id="app-content">
<h3>App Content</h3>
<p>App Providers can determine which content they wish to make available within their App. It is recommended that content is focused on financial information; however, there is no limitation as such. Content can range from news to research to multimedia, and content should be presented using Progressive Enhancement development strategies. That is to say multimedia content, for example, should be shown plugin-free (using HTML5 video or audio elements) for capable browsers and fallback to Flash-based players for browsers that do not yet support HTML5 related technologies.</p>
<p>If App Providers embed URLs back to their own websites, URLs must be opened in a new window as to not interrupt the experience of someone using the Workspace. If authentication is required on App Providers’ site, this can be achieved with pass-through authentication using encrypted URLs as discussed in the Authentication API section of this specification.</p>
<hr>
</section>
<section class="level3" id="single-sign-on">
<h3>Single Sign-On</h3>
<p>Providers participating in the Markit App Framework must modify their web sites' authentication mechanism to accept a customer’s authentication from a Container Provider without requiring the user to retype their Username and Password. With an authentication methodology in place between the Container Provider and App Provider, when a customer authenticates to a Provider’s App, the authentication credentials are passed to the Container Provider. The authentication methodology is also suitable for the reverse, for authenticating a customer requesting content from an App Provider after selecting content from the App within the Container. Authentication information will be passed between App Providers and Container Providers in the form of encrypted URLs.</p>
<hr>
</section>
<section class="level3" id="entitlements">
<h3>Entitlements</h3>
<p>User Entitlements are the responsibility of the App developer. Many apps will need to be decoupled from the content that they need. This would include apps like research aggregation, news filtering, streaming market data, etc. In order to enable an App to retrieve data from multiple, entitled, content providers in real-time, there will need to be an explicit and trusted mechanism of passing entitlements information between the Store, the data vendors, and the app developers.</p>
<p>Further details around entitlements will be forthcoming as this specification evolves.</p>
</section>
</section>
			</div><!--/#docs-->
		</div><!--/span9-->
	</div><!--/row-->

  <hr>

	<footer>
		<p class="pull-left"><strong><small>F2 helps you build smarter financial applications.</small></strong></p>
		<p class="pull-right"><small>F2 was created and is maintained by <a href="http://www.markit.com/">Markit</a> on <a href="//github.com/OpenF2/F2">GitHub</a>.<br>Code licensed under the <a href="//github.com/OpenF2/F2#copyright-and-license">MIT License</a>.<br> Documentation licensed under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a></small></p>
	</footer>

</div><!--/.container-->

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="http://docs.openf2.com/js/bootstrap.min.js"></script>
<script src="http://docs.openf2.com/js/prettify.js"></script>
<script src="../sdk/f2.min.js?0.11.2"></script>
<script src="./js/docs.js"></script>
</body>
</html>
